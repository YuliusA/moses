!function(e,t,a){function n(){e(".dynamic-content").find(".section-container").each(function(t){timeline[t]="#"+e(this).attr("id"),offsets[t]=Math.round(e(this).position().top)})}function o(t){y=t;var a=[];return e.each(offsets,function(){a.push(Math.abs(this-y))}),min=Math.min.apply(Math,a),e.inArray(min,a)}function i(t){0==t?e(".pagescroll-controls > a.next").attr("href",timeline[t+1]):t==timeline.length-1?e(".pagescroll-controls > a.next").css({opacity:0,visibility:"hidden"}):e(".pagescroll-controls > a.next").attr("href",timeline[t+1]).css({opacity:.5,visibility:"visible"})}function s(t,a){(new TimelineMax).to(t,1,{width:"100%",ease:Power2.easeIn}).to(a,1,{width:"100%",ease:Power3.easeOut}).staggerTo(e(".hero-col"),.2,{className:"+=animated",onComplete:l},0,"-=0.75").set(e(".menu-toggle"),{className:"+=chart-bar"}).set(e(".pagescroll-controls"),{className:"-=hidden"})}function l(){return a.querySelector(".imgNeedtoChange")&&e(".hero-col").find(".imgNeedtoChange").each(function(){var t=e(this).children("img"),a=t.data("replacement");t.attr("src",a)}),!1}function r(t,a){timeline=[],offsets=[],p=!0,e("body").addClass("page-loading cover-loading"),c(t,a),f&&e(".mask").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){d(t,a),u=t.path,e(".mask").off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")}),m()||(c(t,a),f&&(d(t,a),u=t.path))}function c(n,o){n.path=""==n.path?"index.html":n.path;var i=n.path.replace(".html",""),s=e('<div class="d-table '+i+'-cover"></div>');s.load(n.path+" .cover .d-table > *",function(i){t.addEventListener("scroll",h),e("header").html(s),setTimeout(function(){e("body").removeClass("cover-loading")}),n.path!=t.location&&o&&t.history.pushState(n,"",n.path),a.title=n.title}),f=!0}function d(l,r){l.path=""==l.path?"index.html":l.path;var c=l.path.replace(".html",""),d=e('<div class="main-content '+c+'-content"></div>');d.load(l.path+" .main-content > *",function(r){var c=m()?300:0,u=e(".path-loader-1"),v=e(".path-loader-2");e("main").html(d),e(".menu-toggle").removeClass("chart-bar"),setTimeout(function(){e("body").removeClass("page-loading").removeClassPrefix("theme-").addClass("theme-"+l.color),s(u,v),e(".mask").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){p=!1,f=!1,t.removeEventListener("scroll",h),e(".mask").off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")}),m()||(p=!1)},c),a.querySelector(".scrollable-content")&&(n(),i(o(e(t).scrollTop())),e(".pagescroll-controls a").bind("click."+g,function(a){a.preventDefault();var n=e(this).attr("href").length>1?e(this).attr("href"):0;TweenMax.to(t,2,{scrollTo:{y:n},ease:Power3.easeOut})}))})}function h(){t.scrollTo(0,0)}function m(){return e("html").hasClass("csstransitions")}var p=!1,f=!1,u="",v=!1,g="mosclick",C=["index","experience","graphene","emirates","wunderman","starbucks","adidas","monalisa"],b={index:{path:"index.html",title:"Moses is an Art Deyerector",color:"orange"},experience:{path:"experience.html",title:"Moses Has 9 years Experience",color:"bluegrey"},graphene:{path:"graphene.html",title:"Moses for Graphene Institute Interior",color:"red"},emirates:{path:"emirates.html",title:"Moses Helped Emirates Finds Pilots",color:"blue"},wunderman:{path:"wunderman.html",title:"Moses On Wunderman Identity",color:"maroon"},starbucks:{path:"starbucks.html",title:"Moses Upped Starbucks Digital Presence",color:"green"},adidas:{path:"adidas.html",title:"Moses Improved Adidas Retail",color:"darkgray"},monalisa:{path:"monalisa.html",title:"Moses and the Monalisa (Concept)",color:"brown"}};e.fn.removeClassPrefix=function(e){return this.each(function(t,a){var n=a.className.split(" ").map(function(t){return 0===t.indexOf(e)?"":t});a.className=n.join(" ")}),this},e(t).on("load",function(l){var r=e(".path-loader-1"),c=e(".path-loader-2");timeline=[],offsets=[],s(r,c),a.querySelector(".scrollable-content")&&(n(),i(o(e(t).scrollTop())),e(".pagescroll-controls a").bind("click."+g,function(a){a.preventDefault();var n=e(this).attr("href").length>1?e(this).attr("href"):0;TweenMax.to(t,2,{scrollTo:{y:n},ease:Power3.easeOut})}));var d=location.pathname.split("/"),h=d[d.length-1].replace(".html",""),m=-1!=C.indexOf(h)?h:"index";t.history.replaceState(b[m],"",b[m].path)}),e(".main-nav").on("click",'[data-type="page-transition"]',function(a){var n=e(this),o=n.parents(".main-nav"),i=location.pathname.split("/"),s=i[i.length-1].replace(".html",""),l=n.attr("href").replace(".html",""),c=b[l];a.preventDefault(),c&&!p&&l!=s&&(t.scrollTo(0,0),o.removeClass("menu-opened"),o.find(".nav-item").removeClass("current"),o.find(".menu-bg").removeClass("centerSlideIn"),o.find(".menu-toggle").removeClass("clicked"),n.parent(".nav-item").addClass("current"),e(".hero").find(".hero-col").removeClass("animated"),e(".pagescroll-controls a").unbind("click."+g),r(c,!0),v=!0),a.stopPropagation()}),e(t).on("popstate",function(e){var t=e.originalEvent.state;if(v&&null!=t){a.title=t.title;var n=location.pathname.split("/"),o=n[n.length-1];p||u==o||r(t,!1)}v=!0}),e(".toggle-wrapper").each(function(){var a=e(this).children(".menu-toggle"),n=e("#cover"),o=e(t).height();a.on("mouseenter",function(){e(this).addClass("hovered"),e(t).scrollTop()>o/2&&n.addClass("zi-1").find("#main-title").removeClass("fade-out").addClass("fade-in")}).on("mouseleave",function(){e(this).removeClass("hovered"),e(t).scrollTop()>o/2&&!e(this).hasClass("clicked")&&n.removeClass("zi-1").find("#main-title").removeClass("fade-in").addClass("fade-out")}).on("click tap",function(a){e(this).hasClass("clicked")?(e(".main-nav").removeClass("menu-opened").find(".menu-bg").removeClass("centerSlideIn"),e(this).removeClass("clicked"),e(t).scrollTop()>o/2&&n.removeClass("zi-1").find("#main-title").removeClass("fade-in").addClass("fade-out")):(e(".main-nav").addClass("menu-opened").find(".menu-bg").addClass("centerSlideIn"),e(this).addClass("clicked"),e(t).scrollTop()>o/2&&n.addClass("zi-1").find("#main-title").removeClass("fade-out").addClass("fade-in"))})}),e(t).scroll(function(){e("#cover");var n=e(a).height(),s=e(t).height(),l=s+e(t).scrollTop(),r=o(e(t).scrollTop());e(t).scrollTop()>s/2?e("#cover").removeClass("zi-1").find(".cover-title").removeClass("fade-in").addClass("fade-out"):e(t).scrollTop()<s/2&&e("#cover").addClass("zi-1").find(".cover-title").removeClass("fade-out").addClass("fade-in"),i(r),e(".page-wrapper").attr("data-doch",l),n-l<s/3?e("a.scrolltop").css({opacity:.5,visibility:"visible"}):e("a.scrolltop").css({opacity:0,visibility:"hidden"})})}(jQuery,window,document);